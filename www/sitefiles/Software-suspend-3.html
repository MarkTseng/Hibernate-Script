TITLE=Software Suspend HOWTO;LINUXDOC

 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Software Suspend HOWTO: Testing software suspend</TITLE>
 <LINK HREF="Software-suspend-4.html" REL=next>
 <LINK HREF="Software-suspend-2.html" REL=previous>
 <LINK HREF="Software-suspend.html#toc3" REL=contents>
</HEAD>
<BODY>
<A HREF="Software-suspend-4.html">Next</A>
<A HREF="Software-suspend-2.html">Previous</A>
<A HREF="Software-suspend.html#toc3">Contents</A>
<HR>
<H2><A NAME="s3">3.</A> <A HREF="Software-suspend.html#toc3">Testing software suspend</A></H2>

<H2><A NAME="ss3.1">3.1</A> <A HREF="Software-suspend.html#toc3.1">Installing the suspend script</A>
</H2>

<P> The best way to use swsusp is to use the hibernate script. This script
should be available on same site as the Software Suspend patch. Download it to
<CODE>/tmp</CODE> and type (replace 0.96 with the version you have downloaded):
<PRE>
# cd /tmp
# tar xzvf hibernate-script-0.96.tar.gz
# cd hibernate-script-0.96
# ./install.sh
# 
</PRE>

This will install the script, a default configuration file, and some man pages.
You may wish to edit <CODE>/etc/hibernate/hibernate.conf</CODE> to taste, depending
on how much of your hardware suspends correctly, and how many little features
you'd like.</P>

<P>If you are using a RPM-based system, RPMs are available from the same
website.</P>

<P>If you are using a Debian system, you may point your apt sources at
<CODE>deb http://cp.yi.org/apt/hibernate ./</CODE> and <CODE>apt-get install hibernate</CODE>.</P>

<P>Check that the directory of <CODE>hibernate</CODE> is in your PATH variable
before going further.</P>

<P> If you want users to be able to suspend, use <CODE>visudo</CODE> and add the
following lines to your /etc/sudoers file, changing the
<CODE>/usr/local/sbin/hibernate</CODE> to the path it was installed
(<CODE>/usr/sbin/hibernate</CODE> in the Debian &amp; RPM packages)</P>
<P>
<PRE>
Host_Alias LOCALHOST=localhost,&lt;your hostname&gt;
ALL LOCALHOST=NOPASSWD: /usr/local/sbin/hibernate *
</PRE>
</P>
<P>See <EM>man sudoers(5)</EM> for more information. Users will then be able to do
<CODE>sudo /usr/local/sbin/hibernate</CODE>.</P>

<H2><A NAME="ss3.2">3.2</A> <A HREF="Software-suspend.html#toc3.2">Suspending in text mode</A>
</H2>

<P> For testing swsusp, you should begin by testing text only suspension.
Switch to a console by <CODE>Ctrl-Alt F1</CODE>, login as root. Under Red Hat 
or Mandrake, stop the X server by typing <CODE>init 3</CODE>. Debian users will
need to stop the xdm, gdm or kdm service by running <CODE>/etc/init.d/xdm stop</CODE>
(substituting xdm with your display manager). Users of other distributions will do
something similar.</P>

<P> Now try <CODE>hibernate</CODE>. The suspension should take place ending with
machine halting. Power on the computer and it should recover your session. If
not see the troubleshooting section.</P>

<H2><A NAME="ss3.3">3.3</A> <A HREF="Software-suspend.html#toc3.3">Suspending with X running</A>
</H2>

<P> You can now recover your graphical session (by typing <CODE>init 5</CODE> for
Red Hat/Mandrake users, <CODE>/etc/init.d/xdm start</CODE> or similar for Debian
users). Log in under X. Try <CODE>sudo /usr/local/sbin/hibernate</CODE> and see if
suspension works correctly.</P>

<HR>
<A HREF="Software-suspend-4.html">Next</A>
<A HREF="Software-suspend-2.html">Previous</A>
<A HREF="Software-suspend.html#toc3">Contents</A>
