<!doctype linuxdoc system><!--*-sgml-*- -->

<article>
<title>Software Suspend FAQ
<author>Compiled by Bernard Blackham
<date>$LastChangedDate$
<!-- $Id$ -->
<abstract>
Gathered here is a collection of frequently asked questions about Software
Suspend under Linux. It began life as a compilation of Florent Chabaud's FAQ
page and Bernard's mini-FAQ. The SGML source file is <url url="FAQ.sgml"
name="here">.

Please send any additions/corrections to this FAQ to <url
url="mailto:b-swfaq@blackham.com.au" name="me">.
</abstract>

<toc>





<sect>Downloading Software Suspend 2

<sect1>How do I get the latest beta Software Suspend 2?
<p>Visit the <url url="http://developer.berlios.de/project/showfiles.php?group_id=1412" name="Berlios download page">.
Under the <bf>Current Beta Patches</bf> package, grab the latest full tarball
(called software-suspend-XXX-for-YYY.tar.gz) for the releveant kernel.

<sect1>How do I get the latest stable Software Suspend 2?
<p>Visit the <url url="http://developer.berlios.de/project/showfiles.php?group_id=1412" name="Berlios download page">.
Under the <bf>Current Kernel Patches</bf> package, grab the latest core patch
<bf>and</bf> latest version-specific patch for your kernel version.

<sect1>What kernel do I need for the latest Software Suspend 2?

<p>For the 2.4 series, you will need a relatively clean 2.4.24 kernel source
tree (eg, not Red Hat's kernel source). There are a number of optional patches
that are convenient if you have extras in your kernel such as 
<url url="http://www.bootsplash.org/" name="bootsplash"> (not always needed, see <ref id="bootsplash" name="Bootsplash help">)
<url url="http://www.netraverse.com/" name="Win4Lin">
or <url url="http://lwn.net/Articles/32037/" name="laptop-mode">
<url url="http://lwn.net/Articles/32520/" name="(updated version)">. If you
have any of these, you might want to download the relevant option patch which
helps Software Suspend 2 integrate nicely.

<p>2.6 kernels come with their own version of Software Suspend (referred to on
the mailing lists as Software Suspend v1). This is in the process of being
merged with Nigel's work on Software Suspend 2 (referred as v2, or swsusp2).
Generally speaking, more people have had success with Software Suspend 2 than
the stock kernel version in 2.6.

<sect1>How can I tell what version of Software Suspend my distro's stock kernel came with?

<p>Run dmesg after boot, and search for any messages containing 'swsusp' or
'Software Suspend'. There should be a version number listed. Distribution
kernels generally differ greatly from the vanilla kernels, and people testing
and developing software suspend will not be using them. Hence people may
be less likely to help when dealing with unknowns.


<sect>Patching the kernel sources

<sect1>cpufreq: I get rejected hunks in processor.h when merging cpufreq patch and swsusp. What can I do?
<p>This was posted by Karol Kozimor:

<quote><verb>
Thus wrote Jens Haug:
> It looks like cpufreq wants to take out these lines (sorry for the 
> line wraps):
> 
> -#define cpu_has_pge    (test_bit(X86_FEATURE_PGE,  
> boot_cpu_data.x86_capability))

Yep, it then puts those in include/asm-i386/cpufeature.h, in the format:
+#define cpu_has_pge            boot_cpu_has(X86_FEATURE_PGE)

> But swsusp wants to add this line:
> 
> +#define cpu_has_pse36  
> (test_bit(X86_FEATURE_PSE36,boot_cpu_data.x86_capability))

Adding

#define cpu_has_pse36           boot_cpu_has(X86_FEATURE_PSE36)

about line 80 works fine for me. Note that X86_FEATURE_PSE36 should be
defined earlier in that file.
</verb></quote>






<sect>Configure/compile problems

<sect1>I applied the ACPI patch but I can't actually select any of the ACPI options (eg buttons, fan, ac adapter, etc).
<p>This is a known bug with the 20030619 ACPI release. This small patch resolves
the issue
<quote><verb>
--- linux-2.4.21/drivers/acpi/Config.in  2003-06-22 15:36:07.000000000 +0100
+++ linux-2.4.21-new/drivers/acpi/Config.in  2003-06-22 15:36:35.000000000 +0100
@@ -8,9 +8,9 @@
   comment 'ACPI Support'
   bool         'ACPI Support' CONFIG_ACPI
   if [ "$CONFIG_ACPI" = "y" ]; then
-    if [ "$CONFIG_X86_LOCAL_APIC" = "y" ]; then
+    #if [ "$CONFIG_X86_LOCAL_APIC" = "y" ]; then
       bool         'CPU Enumeration Only' CONFIG_ACPI_HT_ONLY
-    fi
+    #fi

     if [ "$CONFIG_ACPI_HT_ONLY" = "n" ]; then
       define_bool CONFIG_ACPI_BOOT             y
</verb></quote>





<sect>Compatibility issues

<sect1>ext3: I use ext3fs, can I use software suspend?
<p>Yes! You should even be able to have an ext3 root partition. However, you
<bf>must</bf> use e2fsprogs version 1.25 or later, otherwise you are likely to
crash your filesystem and lose all your data. 

<sect1>reiserfs: I use reiserfs, can I use software suspend?
<p>Yes! Feedback is welcome.

<sect1>xfs: I use XFS, can I use software suspend?
<p>Yes! A special patch is no longer required, as XFS is in the mainstream 2.6
kernels, and in 2.4 since 2.4.25. Swapfiles are not yet verified to work. Watch
this space, or the mailing list for updates!


<sect1>SCSI: I use ide-scsi or other scsi modules, can I use Software Suspend?
<p>Yes, provided you can unload the corresponding scsi modules before
suspension. This is why you can't have an SCSI root or swap partition with
Software Suspend until SCSI is properly supported.

<sect1>Why isn't software suspend a kernel module ?
<p>Resuming must occur at the very beginning of kernel initialization. Modules
are not available at such an early stage.

<sect1>nVidia video cards
<p>(See also the next 2 FAQs). Many people have had success getting Software Suspend 2 to
work with nVidia's 4496 driver on 2.4.x kernels (downloadable from <url url="http://www.nvidia.com/object/linux_display_archive.html" name="http://www.nvidia.com/object/linux_display_archive.html">). Newer versions of nVidia's
driver, or using a 2.6 kernel causes Software Suspend 2 to fail.
<p>nVidia are aware of the issue are believe their next release should play
nicely with power management under 2.6.x and hence with Software Suspend 2. (Thanks to
Jonathan Sambrook for this answer. May 2004)

<sect1>nVidia GeForce4 card: black screen after resuming, amongst other symptoms
<p>The solution below has worked for some people. (Thanks again to Jonathan Sambrook for this answer)
<enum>
<item>Make sure SWSUSP_LEAVE_X_BEFORE_SUSPEND is <em>NOT</em> set to
<tt>nvidia</tt> in /etc/suspend.conf. Use either <tt>yes</tt> or <tt>no</tt>.
<item>Add the following <tt>Option</tt> line to your XF86Config:
<verb>
Section "Device"
  # Your normal card settings here
  # .
  # .
  # .
  # .

  Option "NvAgp" "0"
EndSection
</verb>
<item>Stop X and rmmod nvidia.
<item>Either:
<itemize>
<item>Make sure CONFIG_APM is enabled in your kernel (ACPI will safely override
APM) and run the nvidia driver installation. Or;
<item>Run the nvidia driver installer with the unpack only option (see it's
--help option) and then find and comment out the following conditional
compilation directives in usr/src/nv/nv.c (marked below with a <tt>***</tt>):
<verb>
*** #if defined(CONFIG_APM)
    // for now, only APM is supported. once ACPI is fully supported by the
    // core kernel (looks like 2.6 timeframe), we'll be able to finish up
    // ACPI support. Unfortunately, this means only older laptops will work
    // with power management (any laptop that supports win9x has an APM
    // capable SBIOS/VBIOS and will work).
    // Attempting to suspend/hibernate on an ACPI-only system is likely to
    // hang the system, so we continue to try to avoid that case. this check
    // of the kernel config is a weak attempt really, if the end user loaded
    // an APM enabled kernel on an ACPI-only system, they're still probably
    // going to hang here. we'll keep working on better ways of handling
    // this.
    case PM_RESUME:
      nv_printf(NV_DBG_INFO, "NVRM: received PM resume event\n");
      rm_power_management(NV_STATE_PTR(lnv), 0, rqst);
      break;

    case PM_SUSPEND:
      nv_printf(NV_DBG_INFO, "NVRM: received PM suspend event\n");
      rm_power_management(NV_STATE_PTR(lnv), 0, rqst);
      break;
*** #endif
    default:
      nv_printf(NV_DBG_INFO, "NVRM: received unknown PM event: 0x%x\n", rqst);
      return 1;
    }
</verb>
The compile & install this nvidia driver.
</itemize>
<item>Start X
<item><tt>hibernate</tt>
</enum>

<sect1>3D: Suspension occurs correctly, but when I resume my Xserver has lost 3D acceleration.
<p>This seems to happen for some hardware configurations, for instance Nvidia
GEforce cards. Launching a fake xserver just after resume may solve the
problem. This can be done by adding
<verb>
xinit /bin/false -- :1
</verb>
at the end of resume script. If you use suspend script, try the <bf>nvidia</bf>
keyword in SWSUSP_LEAVE_X_BEFORE_SUSPEND option. Also have a look at the previous FAQ, above.

<sect1>pre-emption: Using a 2.5.X kernel, I get an endless loop of errors saying "bad: scheduling while atomic" when suspending.
<p>This issue has been resolved since around version 2.0 - if you are
experiencing these, make sure you have updated to the latest version.

<sect1>PCMCIA: It hangs upon resume when restarting pcmcia!
<p>This has been reported on some hardware when using the kernel pcmcia support
(yenta_socket). A workaround is to use pcmcia_cs support instead. Disable all
PCMCIA kernel stuff and compile the pcmcia_cs package instead. Use PCIC=i82365
(less likely PCIC=tcic) option instead of yenta.

<sect1>Radeon and DRI support
<p>Charl Botha has written a page on this at <url url="http://cpbotha.net/dri_resume.html" name="http://cpbotha.net/dri_resume.html">

<sect1>USB issues
<p>Some machines have issues with USB and Software Suspend. The safest solution
is to compile all your USB drivers in as modules, and unload them prior to
suspending.


<sect>Using Software Suspend

<sect1> Swsusp doesn't seem to do anything (or: I upgraded to the latest Software Suspend 2 and my machine no longer suspends! Instead, it shuts down all drivers, etc and then starts resuming.)
<p> Earlier versions of Software Suspend 2 used the file /proc/sys/kernel/swsusp to
activate suspension. This has been deprecated. Now to activate suspension, you
will either need to use one of the following methods:
<itemize>
<item> Get an updated suspend script (eg v0.15) - an updated one is available on the download page.
<item> <tt>echo anything > /proc/swsusp/activate</tt>
<item> <tt>echo 4 > /proc/acpi/sleep</tt> if you have a working (and not-so-buggy) ACPI implementation
<!--<item> Download a patched shutdown program, (eg <url url="shutdown+z">, call using <tt>shutdown -z now</tt>). -->
</itemize>

And if you are still having little or no success...
<itemize>
<item> Check you have a <tt>resume2=swap:/dev/hdXX</tt> option on your kernel commandline in your bootloader (eg, LILO or GRUB).
<item> Grep through <tt>dmesg</tt> for 'Software Suspend' to see if it is giving any error messages on boot.
<item> Check that in your .config you have the following lines:
<quote><verb># CONFIG_SMP is not set
CONFIG_PM=y
CONFIG_SOFTWARE_SUSPEND2=y
CONFIG_SOFTWARE_SUSPEND_SWAPWRITER=y
...
CONFIG_PROC_FS=y
...
# CONFIG_APM_IGNORE_USER_SUSPEND is not set (if you are using APM)
</verb></quote>
<item>Did you really patch your kernel source?<p><tt>bzcat &lt;your patch.bz2&gt; | patch --dry-run -p1 -R |more</tt><p> should not return any failures after patching.
<item>Did you run <tt>make dep</tt> after patching?
<item>Are you really booting your freshly-compiled kernel? Run <tt>uname -a</tt> and check the timestamp - it should match the time of compilation.
<item>To be absolutely certain there's nothing stale hanging about:<p>
      <bf>SAVE</bf> your .config somewhere outside the kernel tree, run <tt>make mrproper</tt>, copy the .config back
      and then run <tt>make oldconfig dep bzImage modules</tt>.
</itemize>


<sect1>It doesn't power off, but hangs forever.
<p>If you don't have ACPI or APM enabled in your kernel, Software Suspend can't tell the
hardware to power off, but if you reach a screen reading <tt>Ready to power
down</tt> the suspend is complete and you can manually power off.

<sect1>It resumes but hangs. I can't boot any more. Or, my machine reboots forever.
<p>You have to tell kernel to ignore the resume partition using the noresume2
option. On the lilo prompt, type something like "linux noresume2".  You may find
useful to have one of your lilo choices launch your kernel with the noresume2
option.  You now have to figure out why it didn't work ;-)

<sect1>Suspending and resuming takes ages, what can I do?
<p>Using the suspend script, most of the delay is due to the necessity of
stopping drivers before suspending and restarting them after resume. Suspending
will never be as fast as you imagine it, at least as long as hardware drivers
will not correctly handle suspending events. 

<p>If the delay is in writing to disk, then you may want to play with the
<tt>image_size_limit</tt> option in <tt>/proc/swsusp/</tt>. By setting a maximum
image size, Software Suspend 2 will try and free as much memory as possible to
achieve this (or failing that, flushing to disk) which will speed up suspend
and resume on machines with slow disk IO. The only downfall is that your
machine might not be as responsive on resume until buffers and caches are
restored.

<p>If you are feeling daring, you can write your own customised suspend script,
which does the minumum required for your machine. Some machines can suspend
instantly simply by <tt>echo > /proc/swsusp/activate</tt>. Others need a bit
more of a hand - the big offenders are generally sound cards, network cards,
PCMCIA and USB.

<sect1>Can I switch from Windows to Linux using Software Suspend?
<p>Yes, but the result is guaranteed only if the linux and windows partitions
are totally independant. If for instance you use a FAT partition to share data
between the two operating systems, you <bf>must</bf> unmount the partition
before suspending. Otherwise, modification of data under Windows may be lost
when resuming Linux. Conversely, modification of data under Linux <bf>will</bf>
be lost if Windows 2000's own software suspension feature is used.

Doug has posted the following message on the swsusp mailing list concerning unmounting of drives in XP (not verified):

<quote>
<verb>
> It is posible, there is iirc something in disk manager about this, I 
> will pay about with my win2k box and see if I can find it, but I have 
> definatly seen something about it.
>
> http://support.microsoft.com/default.aspx?scid=KB;EN-US;q314449&
> might be the right sort of area
>
> -- 
>      Tim Fletcher                 


Actually that link looks dead on.  Run mountvol from the command line with
no parameters and you get a list of volume IDs (hideously long strings) and
locations where they are mounted and details on syntax for how to mount 
and unmount drives.  I've attached the screen output below.  
To automate it just go to 

http://www.budja.com/shutdown/

to get a simple little command-line program for hibernating and then write
yourself a little .bat file to put it all together.
Below is one I wrote but you'll need to run mountvol to get the right
volume ID to put in here first before using it and put the right path in
for the shutdown command.  Of course I don't know yet what exactly
"unmounting" means here. Does it really synchronize the disk or whatever
is needed? I'll let ya know how the actual results are when using this to
suspend in and out of windows and linux a few times.  Next I'll try to get
my "Easy Acess Buttons" programmed and maybe I'll even be able to
reprogram the power button.  If not it's not so bad to have to click a
link somewhere to hibernate.  Oh yeah... might as well add the A drive to
this procedure... I doubt it matters though seeing as how you can pull
idle floppy's out of windows without causing any harm anyway.
</verb>
</quote>

<sect1>Can I change removable devices while suspended?
<p>This can be done provided you stop the corresponding drivers. For this
reason, it seems better to stop USB, PCMCIA and IrDA before suspending and
start the services back on resume. Under SuSE the corresponding /etc/init.d
scripts are named pcmcia, usbmgr and irda. Good precaution is also to unmount
the floppy drive.

<sect1>Suspension seems to occur correctly, but when I resume the suspend signature is not found.
<p>Double check that you have correctly set a resume2=swap:/dev/hdX option and that
you have updated your lilo or grub configuration. Also check that you don't
have an unwanted noresume2 option. If all this is OK than perhaps you have one
of those disks with hardware cache. Try to use hdparm -W 0 /dev/hdX before
suspending. This should disable hardware cache. Please report if you encounter
this bug since it is supposed to be fixed since 2.4.18-beta8. 

<sect1>After resume, why is my clock at the time of suspension?
<p>The system time is stored in a part of memory that is saved during
suspension. One needs to reset the clock using hwclock upon resume, since
reading the CMOS is the only way for the system to know the real time. Use
the hibernate script in order to do that automatically.

<sect1>How can I patch Software Suspend to have a script launched on resume?
<p>You don't need that: this feature is natural with Software Suspend. See the
hibernate script for instance. 

<sect1>Suspension seems to occur correctly, but when I resume mouse and keyboard are frozen.
<p>This seems to happen for some hardware configurations. We haven't found a
proper way to fix that for the moment. Sometimes, it seems that stopping gpm
before suspending and restarting it upon resume can help. In other cases, just
stopping gpm and never restarting it is even better. 

<sect1>It fails to suspend with a message "not enough pages"
<p>The amount of memory needed depends on a lot of things. For the average user,
sizeof(RAM)x2 is ample for the swap partition used by Software Suspend 2. 

<sect1>How can I get Bootsplash to play with Software suspend nicely?<label id="bootsplash">
<p>Documentation contributed by Alessandro Barbosa (barbosa_alessandro at hotmail dot com): <url url="contrib/Swsusp2_and_Bootsplash_on_FC2.doc" name="Bootsplash and Software Suspend on Fedora Core 2">
<p>Or the following, thanks to Markus Gaugusch and Nigel Cunningham:
<p>Bootsplash with software suspend still seems somewhat voodoo-ish, but
hopefully the steps listed here will point you in the right direction.

<enum>
<item> Patch your kernel with the official bootsplash patch from
www.bootsplash.org and read the documentation with it. Configure your kernel
with bootsplash /proc support.
<item> Install the splash utilities from bootsplash.org and a theme.
<item> If you are using a version 1 or 2 bootsplash image, you will need to
patch software suspend with the bootsplash-option patch in the Software Suspend 2 package
and recompile. With a version 3 bootsplash image, this is not neccesary.
<item> On suspend, execute:
<p><tt>/path/to/splash -s -u 62 /etc/bootsplash/themes/.../config/bootsplash-1024x768.cfg</tt>
<p>If you have a version 1 or 2 image, <tt>echo 424 582 506 30 15 > /proc/sys/kernel/splash_progress</tt>. These numbers are x-coordinate, y-coordinate, width, height and RGB colour (24-bit).
<p>This puts the splash screen on VT 63 (counting from 0), puts a black progress box roughly down the bottom.
<item> Suspend.
<item> On resume, execute <tt>splash -s -u 62</tt> to clear the bootsplash again.
<item> Possibly change VTs back to your original one.
</enum>

<sect1>Resuming complains about a version mismatch.

<p>The noresume2 kernel command line option discards the suspend image and
restores the swap signature. When using the noresume2 option, the suspended
kernel state and filesystem state is lost. When using a journaling filesystem,
no filesystem data is lost.

<sect2>WARNING! Scenarios that can lead to data loss or corruption:
<p>This may occur after suspending with a Software Suspend-enabled kernel, then
booting a different kernel.

<sect3>Scenario 1 - a second kernel recognises the suspend image
<p>The version mismatch is caused by attempting to resume a kernel whose header
does not match the header of the suspended kernel in the suspend image.
<p>For example, you suspended a kernel, and recompiled it, or you suspended one
kernel and attempted to resume another one which recognizes the suspend image.
In this case, put noresume2 on the command line for this boot.
<p>Should you forget, you will get a version mismatch message: <tt>SHIFT to
reboot, CONTROL to continue</tt> - push shift and either select the correct
kernel or use the noresume2 option to boot.
<p><em>Any</em> difference between resumed and suspended kernels will
corrupt/crash the system on forcing resume with CONTROL and possible cause
filesystem damage as well.

<sect3>Scenario 2 - a second kernel does not recognise the suspend image
<p>This is more dangerous as there is no warning. For example, you have two
kernels, Kernel A and Kernel B. Kernel A has software suspend support, and
Kernel B does not.
<p>The danger comes when suspending with Kernel A, you then decide to boot
Kernel B, that does not recognize the swap image. It ignores the "bad" swap
partition and runs without it as if nothing happened (except maybe if it runs
low on memory).
<p>The problem to the suspended Kernel A is that since Kernel B mounted the
filesystem r/w, it no longer matches the suspended kernel and will be corrupted
on resume. Thus, severe damage to the filesystem will result once the disk is
written to by the resumed kernel. 
<p>Should this scenario occur, the suspended kernel must be prevented from
resuming. This can be accomplished by an mkswap of the swap partition from
Kernel B, or booting Kernel A with noresume2. 

<sect1>Is there any way to convince Software Suspend 2 to free things like disk caches and
buffers but nothing else?
<p>In short, no. If you use the <tt>image_size_limit</tt> option, Software Suspend 2 will
attempt to free memory until that constraint is met. Since disk caches are the
easiest thing to free, the Linux VM will free it first. If you leave the value
of <tt>image_size_limit</tt> at zero, it will only free as much memory as it
needs to be able to fit the image into swap.

<sect1>Freezer debugging: It hangs at 'Waiting for activity to finish' or 'Syncing remaining I/O'.
<p>
<enum>
<item>Compile in debugging support if you haven't already. You may also want to increase the size of the message buffer:
    <itemize>
        <item>For 2.4, edit <tt>kernel/printk.c</tt>. Change 16384 on line 41 to a higher power of two, say 1048576
        <item>For 2.6, change the kernel log buffer size while choosing your compile options. It's under General Setup.
    </itemize>
<item>Set your debugging options as follows:
    <itemize>
        <item><tt>echo 1 > /proc/swsusp/enable_escape</tt> - ensures you can press escape to cancel the suspend when it hangs
        <item><tt>echo 1 > /proc/swsusp/log_everything</tt> - tells Software Suspend 2 to record all it's about to display
        <item><tt>echo 4 > /proc/swsusp/default_console_level</tt> - tell it to display medium level debugging
        <item><tt>echo 2 > /proc/swsusp/debug_sections</tt> - tell it to display messages about the freezer
    </itemize>
<item>Tell it to try to suspend: <tt>echo > /proc/swsusp/activate</tt>
<item>When it hangs (assuming it does), press escape. It should print a lot of information and then
return you to the command prompt.
<item>Look in /var/log/messages. If the output does not contain the names of procedures, but instead lots 
of hexadecimal numbers, run the output through ksymoops. (See Documentation/oops-tracing in the kernel tree
for more help here).
<item>Send your output directly to Nigel, who will usually get back to you pretty quickly. Don't send all of the
output to the list, please.
</enum>

<sect1>I've suspended and resumed and now I can't open new X applications and my /tmp directory is empty (on Debian)
<p>A recent version of the initscripts package decided to blow away temporary
directories when calling <tt>mountnfs.sh</tt> (See 
<url url="http://bugs.debian.org/227112" name="Bug #227112">).  The simple
solution is to remove mountnfs.sh from your SWSUSP_STOP_SERVICES_BEFORE_SUSPEND
in /etc/suspend.conf and add your extra NFS mounts into SWSUSP_UMOUNTS.

<sect1>System hangs on booting a swsusp kernel (2.6)
<p>If CONFIG_CC_OPTIMIZE_FOR_SIZE is enabled, you may get a hang on boot just after:
<quote><verb>
Software Suspend 2.0.0.10: Swap space signature found.
Software Suspend 2.0.0.10: Checking for image...
Software Suspend 2.0.0.10: This is normal swap space.
Software Suspend 2.0.0.10: kswsuspd starting
</verb></quote>
Disabling CONFIG_CC_OPTIMIZE_FOR_SIZE appears to resolve the issue. Thanks to
Michael Schneider for recognising this problem and solution!

<sect>Miscellaneous

<sect1>What's left to do?
<p>Plenty! SCSI is not supported if used on root/swap partitions, only IDE. A
lot of hardware is not restored properly, including some graphic chipsets. This
means that this hardware is in a different state upon resume than the kernel
thinks it is. For the kernel, the hardware is reinitialized although it has
been reset by BIOS. Sometimes, this may be solved by setting the BIOS option
(if it exists) to non PnP OS.

<sect1>Swsusp seems nice, but can I use it for doing snapshots?
<p>No you can't because the image you save is linked to your filesystem state,
including root. You can only do that if the two systems are completely
independent. It may be possible (but not guaranteed) that you could do that if
your root partition is mounted read-only and you unmount all other read-write
devices before suspending, but that would have absolutely no interest IMHO.

</article>
